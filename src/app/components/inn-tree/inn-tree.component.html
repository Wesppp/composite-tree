<ul *ngTemplateOutlet="itemTemplate; context: { $implicit: treeItems }"></ul>

<ng-template let-items #itemTemplate>
  <li
    *ngFor="let item of items">
    <div
      class="text-wrapper"
      [appSearchMark]="search">
      <input
        [checked]="item.isChecked"
        (change)="onChangeBox(item, $event)"
        type="checkbox">
      {{ item.text | defaultValue }}
    </div>

    <ng-container *ngIf="item.children.length">
      <ul *ngTemplateOutlet="itemTemplate; context: { $implicit: item.children }"></ul>
    </ng-container>
  </li>
</ng-template>
